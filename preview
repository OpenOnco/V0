#!/bin/bash
# OpenOnco Preview: smoke tests â†’ push to develop â†’ Vercel preview URL

set -e
cd "$(dirname "$0")"

echo "ğŸ§ª Running smoke tests..."
npm run test:smoke

echo ""
echo "âœ… Tests passed. Pushing to develop..."
git add -A
git commit -m "${1:-wip: preview}" --allow-empty
git push

echo ""
echo "â³ Waiting for Vercel deployment..."
sleep 15
vercel ls 2>&1 | grep "Preview" | head -1

echo ""
echo "ğŸš€ Preview deployed!"
